# Externals.Vcpkg

Репозиторий сборки сторонних библиотек при помощи [vcpkg](https://github.com/microsoft/vcpkg).

- Ссылки на нужные библиотеки устанавливать в externals-dependencies\vcpkg.json
- Для сборок под Android в Build.cmd необходимо через переменную окружения ANDROID_NDK_HOME
установить путь к папке Android NDK.

> Ссылка на определенный tag vcpkg автоматически приводит к сборке версий библиотек,
> которые этот tag содержит.

### Сборка библиотек как SDK

- Клонировать репозиторий для нужного тега.
- Запустить скрипт Build.SDK.cmd.

> Запускать скрипт следует от имени пользователя Windows, в имени которого нет скобок.

Результатом будет архив ExternalsSDK_v0.0.0.0.7z, содержащий собранные библиотеки (x64 для Windows
и ARM64 для Android), соответствующих выбранному тегу версий.

### Сборка библиотек при сборке решения

- Подключить репозиторий к нужному проекту как submodules.
- Добавить в решение проект, которому в события перед сборкой добавить запуск скрипта Build.cmd и
установить всем остальным проектам зависимоть от этого, чтобы он собирался первым.

> Скрипт Build.cmd собирает библиотеки один раз, при наличии собранных библиотек просто завершается.

### Использование

- Распаковать архив в какую-либо папку.
- Подключить к проектам решения файл Externals.props (это позволит использовать 
разные версии библиотек в разных решениях)

------------ или ------------

- Выполнить в папке SDK команду **vcpkg integrate install** (это встроит данную версию сборки 
в Visual Studio глобально - как для всех существующих, так и для вновь создаваемых решений).

[Пример](https://github.com/Unicornum/Example.Externals.Vcpkg) подключения и использования готовых сборок Externals SDK.
